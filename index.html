<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Housekeeper Invoice Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #2563eb;       /* blue-600 */
            --primary-hover: #1d4ed8; /* blue-700 */
            --primary-light: #eff6ff; /* blue-50 */
            --primary-border: #93c5fd;/* blue-300 */
            --primary-text-dark: #1e40af; /* blue-800 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        /* Dynamic Theme Classes */
        .theme-bg { background-color: var(--primary) !important; }
        .theme-bg-light { background-color: var(--primary-light) !important; }
        .theme-text { color: var(--primary) !important; }
        .theme-text-dark { color: var(--primary-text-dark) !important; }
        .theme-border { border-color: var(--primary-border) !important; }
        .theme-hover-bg:hover { background-color: var(--primary-hover) !important; }

        /* Custom Focus Rings for Inputs matching theme */
        .theme-focus:focus {
            outline: none;
            border-bottom-color: var(--primary-border) !important;
            --tw-ring-color: var(--primary-border);
        }
        
        /* Select focus override */
        select:focus, input[type="number"]:focus, input[type="text"]:focus {
            border-color: var(--primary) !important;
            --tw-ring-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary) !important;
            outline: none;
        }

        /* Calendar Styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            border-radius: 9999px; /* Circle */
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .calendar-day:hover:not(.empty) {
            background-color: #e5e7eb;
        }

        .calendar-day.selected {
            background-color: var(--primary) !important; 
            color: white !important;
            font-weight: 600;
        }

        .calendar-day.empty {
            cursor: default;
        }

        .calendar-header {
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            color: #6b7280;
            padding-bottom: 8px;
        }

        /* Print Specific Styles - OPTIMIZED FOR COMPACT HALF-PAGE */
        @media print {
            @page {
                margin: 0.5cm;
                size: auto; 
            }

            /* Scale down the entire document proportionally using root font size */
            html {
                font-size: 12px; /* Scales all rem units (text-lg, text-xs) down proportionally */
            }

            body {
                background-color: white;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            .no-print {
                display: none !important;
            }

            .invoice-container {
                box-shadow: none !important;
                padding: 1rem !important; /* Tight padding */
                margin: 0 !important;
                max-width: 100% !important;
                border: 1px solid #ddd !important;
                min-height: auto !important; /* Remove fixed height */
                height: auto !important;
                page-break-inside: avoid; /* PREVENTS SPLITTING */
            }

            /* Compact gaps for print */
            .print-compact-gap {
                gap: 0.5rem !important;
                margin-bottom: 0.5rem !important;
            }
            
            .print-compact-mb {
                margin-bottom: 0.25rem !important;
            }

            .print-hidden-mt {
                margin-top: 0 !important;
                padding-top: 0 !important;
            }

            /* Scale down calendar significantly */
            .calendar-day {
                width: 20px !important;
                height: 20px !important;
                font-size: 0.7rem !important;
                aspect-ratio: auto !important;
                padding: 2px !important;
            }
            
            .calendar-header {
                font-size: 0.65rem !important;
                padding-bottom: 2px !important;
            }
            
            .calendar-section {
                margin-bottom: 0.5rem !important;
            }

            /* Adjust headings layout but keep font hierarchy */
            h2 { margin-bottom: 0 !important; }
            h3 { margin-bottom: 2px !important; }
            
            /* Input styling for print */
            input, textarea, select {
                border: none !important;
                background: transparent !important;
                resize: none;
                padding: 0 !important;
                margin: 0 !important;
                /* Removed 'font-size: inherit' to let Tailwind text-classes work */
                height: auto !important;
                line-height: 1.2 !important;
            }

            /* Hide placeholders in print */
            input::placeholder, textarea::placeholder {
                color: transparent;
            }
            
            /* Save ink on icon */
            .icon-box {
                background: none !important;
                color: var(--primary) !important; 
                width: auto !important;
                height: auto !important;
                box-shadow: none !important;
            }
            .icon-box i {
                font-size: 1.5rem !important;
            }
            
            /* Compact footer */
            .footer-box {
                background-color: transparent !important;
                padding: 0.5rem !important;
                border-top: 1px solid #eee;
            }
            .footer-message {
                margin-top: 0.5rem !important;
                padding-top: 0.5rem !important;
            }
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">

    <!-- Navbar / Controls (Hidden on Print) -->
    <div class="no-print max-w-4xl mx-auto mb-6 flex flex-col md:flex-row justify-between items-center gap-4">
        <div>
            <h1 class="text-2xl font-bold text-gray-800"><i class="fa-solid fa-file-invoice-dollar mr-2"></i>Invoice Generator</h1>
            <p class="text-gray-500 text-sm">Generate invoices for housekeeping services</p>
        </div>
        <div class="flex gap-3">
            <button onclick="window.print()" class="theme-bg theme-hover-bg text-white font-medium py-2 px-6 rounded-lg shadow transition flex items-center gap-2">
                <i class="fa-solid fa-print"></i> Print / Save PDF
            </button>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">

        <!-- Sidebar Settings (Hidden on Print) -->
        <div class="no-print col-span-1 space-y-4">
            
            <!-- Theme Selector -->
            <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-200">
                <h3 class="font-semibold text-gray-700 mb-3 text-sm uppercase tracking-wide">Theme Color</h3>
                <div class="flex gap-2">
                    <button onclick="setTheme('blue')" class="w-8 h-8 rounded-full bg-blue-600 border-2 border-white shadow-sm ring-2 ring-gray-200 hover:scale-110 transition" title="Blue"></button>
                    <button onclick="setTheme('green')" class="w-8 h-8 rounded-full bg-emerald-600 border-2 border-white shadow-sm ring-2 ring-gray-200 hover:scale-110 transition" title="Green"></button>
                    <button onclick="setTheme('pink')" class="w-8 h-8 rounded-full bg-rose-600 border-2 border-white shadow-sm ring-2 ring-gray-200 hover:scale-110 transition" title="Pink"></button>
                    <button onclick="setTheme('purple')" class="w-8 h-8 rounded-full bg-violet-600 border-2 border-white shadow-sm ring-2 ring-gray-200 hover:scale-110 transition" title="Purple"></button>
                    <button onclick="setTheme('orange')" class="w-8 h-8 rounded-full bg-orange-600 border-2 border-white shadow-sm ring-2 ring-gray-200 hover:scale-110 transition" title="Orange"></button>
                    <button onclick="setTheme('dark')" class="w-8 h-8 rounded-full bg-gray-700 border-2 border-white shadow-sm ring-2 ring-gray-200 hover:scale-110 transition" title="Monochrome"></button>
                </div>
            </div>

            <!-- Period Selector -->
            <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-200">
                <h3 class="font-semibold text-gray-700 mb-3 text-sm uppercase tracking-wide">Billing Period</h3>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-xs text-gray-500 mb-1">Month</label>
                        <select id="monthSelect" class="w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg p-2.5">
                            <option value="0">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11">December</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs text-gray-500 mb-1">Year</label>
                        <input type="number" id="yearInput" class="w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg p-2.5" value="2023">
                    </div>
                </div>
            </div>

            <!-- Rate Settings -->
            <div class="bg-white p-5 rounded-xl shadow-sm border border-gray-200">
                <h3 class="font-semibold text-gray-700 mb-3 text-sm uppercase tracking-wide">Compensation</h3>
                <div class="space-y-3">
                    <div>
                        <label class="block text-xs text-gray-500 mb-1">Daily Rate (PHP)</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-500">₱</span>
                            </div>
                            <input type="number" id="rateInput" class="pl-7 w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg p-2.5" placeholder="0.00" value="435">
                        </div>
                    </div>
                    
                    <!-- Dynamic Items Section -->
                    <div>
                        <label class="block text-xs text-gray-500 mb-2 font-semibold uppercase tracking-wider">Additional Items</label>
                        <div id="sidebarItemsContainer" class="space-y-2 mb-2">
                            <!-- Items inserted by JS -->
                        </div>
                        <button onclick="addItem()" class="w-full py-2 border-2 border-dashed border-gray-300 text-gray-500 rounded-lg hover:border-blue-400 hover:text-blue-500 transition text-xs font-semibold flex items-center justify-center gap-1">
                            <i class="fa-solid fa-plus"></i> Add Adjustment
                        </button>
                        <p class="text-[10px] text-gray-400 mt-2">Use negative numbers (e.g. -500) for deductions.</p>
                    </div>
                </div>
            </div>

            <!-- Instructions -->
            <div class="theme-bg-light p-5 rounded-xl border theme-border">
                <h3 class="font-semibold theme-text-dark mb-2 text-sm"><i class="fa-solid fa-circle-info mr-1"></i> How to use</h3>
                <ul class="text-xs theme-text-dark space-y-1 list-disc list-inside">
                    <li>Select a <strong>Theme Color</strong> above.</li>
                    <li>Update Rate and Add <strong>Adjustments</strong>.</li>
                    <li>Click days on the <strong>Calendar</strong> (right).</li>
                    <li>Fill in invoice details.</li>
                    <li>Click Print when ready.</li>
                </ul>
            </div>
        </div>

        <!-- Invoice Preview (The Printable Area) -->
        <div class="col-span-1 md:col-span-2">
            <div class="invoice-container bg-white p-8 md:p-10 rounded-xl shadow-lg border border-gray-200 min-h-[800px] flex flex-col justify-between relative">
                
                <!-- Invoice Header -->
                <div>
                    <div class="flex justify-between items-start mb-8 print-compact-mb">
                        <div>
                            <h2 class="text-3xl font-bold text-gray-800 tracking-tight">INVOICE</h2>
                            <div class="mt-2 text-gray-500 text-sm">
                                Invoice #: <input type="text" value="INV-2023-001" class="font-medium text-gray-700 theme-focus border-b border-gray-200 w-32 hover:bg-gray-50 p-1 rounded">
                            </div>
                            <div class="text-gray-500 text-sm">
                                Date: <input type="date" id="invoiceDate" class="font-medium text-gray-700 theme-focus border-b border-gray-200 hover:bg-gray-50 p-1 rounded">
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="icon-box w-16 h-16 theme-bg rounded-lg flex items-center justify-center text-white text-2xl mb-2 ml-auto shadow-sm">
                                <i class="fa-solid fa-broom"></i>
                            </div>
                            <input type="text" placeholder="Your Service Name" value="Housekeeping Services" class="text-right font-bold text-lg text-gray-800 theme-focus border-b border-gray-200 w-full hover:bg-gray-50 rounded">
                        </div>
                    </div>

                    <!-- From / To -->
                    <div class="grid grid-cols-2 gap-8 mb-8 print-compact-gap">
                        <div>
                            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">From (Housekeeper)</h3>
                            <input type="text" placeholder="Housekeeper Name" class="block w-full text-lg font-semibold text-gray-800 theme-focus border-b border-transparent hover:border-gray-300 transition mb-1" value="Maria Santos">
                            <input type="text" placeholder="Address / Contact Info" class="block w-full text-sm text-gray-500 theme-focus border-b border-transparent hover:border-gray-300 transition" value="0912-345-6789">
                        </div>
                        <div class="text-right">
                            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">To (Homeowner)</h3>
                            <input type="text" placeholder="Client Name" class="block w-full text-right text-lg font-semibold text-gray-800 theme-focus border-b border-transparent hover:border-gray-300 transition mb-1" value="Juan Dela Cruz">
                            <input type="text" placeholder="Address" class="block w-full text-right text-sm text-gray-500 theme-focus border-b border-transparent hover:border-gray-300 transition" value="Davao City">
                        </div>
                    </div>

                    <hr class="border-gray-100 mb-8 print-compact-mb">

                    <!-- Calendar Visual -->
                    <div class="mb-8 calendar-section">
                        <h3 class="text-sm font-bold text-gray-700 mb-4 flex justify-between items-center print-compact-mb">
                            <span>Service Record: <span id="displayMonthYear" class="theme-text">October 2023</span></span>
                            <span class="text-xs font-normal text-gray-400 no-print">(Click dates below to mark work)</span>
                        </h3>
                        
                        <div class="bg-white border border-gray-200 rounded-xl p-4">
                            <!-- Days of Week -->
                            <div class="calendar-grid mb-2">
                                <div class="calendar-header text-red-400">Sun</div>
                                <div class="calendar-header">Mon</div>
                                <div class="calendar-header">Tue</div>
                                <div class="calendar-header">Wed</div>
                                <div class="calendar-header">Thu</div>
                                <div class="calendar-header">Fri</div>
                                <div class="calendar-header">Sat</div>
                            </div>
                            <!-- Days Grid -->
                            <div id="calendarDays" class="calendar-grid">
                                <!-- JS will populate this -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer / Totals -->
                <div>
                    <div class="footer-box bg-gray-50 rounded-lg p-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-gray-600 text-sm">Total Days Worked</span>
                            <span id="totalDaysDisplay" class="font-semibold text-gray-800">0 days</span>
                        </div>
                        <div class="flex justify-between items-center mb-2 print-compact-mb">
                            <span class="text-gray-600 text-sm">Daily Rate</span>
                            <span id="rateDisplay" class="font-semibold text-gray-800">₱ 435.00</span>
                        </div>
                        
                        <!-- NEW: Subtotal Area -->
                        <div class="my-2 border-t border-gray-200 border-dashed"></div>

                        <!-- Dynamic Invoice Items -->
                        <div id="invoiceItemsContainer">
                            <!-- Injected by JS -->
                        </div>

                        <div class="border-t border-gray-200 pt-4 flex justify-between items-center print-hidden-mt">
                            <span class="text-lg font-bold text-gray-800">Total Due</span>
                            <span id="totalAmountDisplay" class="text-2xl font-bold theme-text">₱ 0.00</span>
                        </div>
                    </div>

                    <div class="footer-message mt-8 pt-8 border-t border-gray-100 text-center">
                        <p class="text-gray-400 text-xs italic">Thank you for your business!</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // State
        const state = {
            selectedDates: new Set(),
            currentMonth: new Date().getMonth(),
            currentYear: new Date().getFullYear(),
            dailyRate: 435,
            items: [
                { id: 1, description: 'Travel Allowance', amount: 500 }
            ]
        };

        // Theme Configuration
        const themes = {
            blue: {
                primary: '#2563eb', // blue-600
                hover: '#1d4ed8',   // blue-700
                light: '#eff6ff',   // blue-50
                border: '#93c5fd',  // blue-300
                dark: '#1e40af'     // blue-800
            },
            green: {
                primary: '#059669', // emerald-600
                hover: '#047857',   // emerald-700
                light: '#ecfdf5',   // emerald-50
                border: '#6ee7b7',  // emerald-300
                dark: '#064e3b'     // emerald-800
            },
            pink: {
                primary: '#e11d48', // rose-600
                hover: '#be123c',   // rose-700
                light: '#fff1f2',   // rose-50
                border: '#fda4af',  // rose-300
                dark: '#881337'     // rose-800
            },
            purple: {
                primary: '#7c3aed', // violet-600
                hover: '#6d28d9',   // violet-700
                light: '#f5f3ff',   // violet-50
                border: '#c4b5fd',  // violet-300
                dark: '#4c1d95'     // violet-800
            },
            orange: {
                primary: '#ea580c', // orange-600
                hover: '#c2410c',   // orange-700
                light: '#fff7ed',   // orange-50
                border: '#fdba74',  // orange-300
                dark: '#7c2d12'     // orange-800
            },
            dark: {
                primary: '#4b5563', // gray-600
                hover: '#374151',   // gray-700
                light: '#f3f4f6',   // gray-100
                border: '#d1d5db',  // gray-300
                dark: '#111827'     // gray-900
            }
        };

        // DOM Elements
        const calendarGrid = document.getElementById('calendarDays');
        const monthSelect = document.getElementById('monthSelect');
        const yearInput = document.getElementById('yearInput');
        const rateInput = document.getElementById('rateInput');
        const sidebarItemsContainer = document.getElementById('sidebarItemsContainer');
        const invoiceItemsContainer = document.getElementById('invoiceItemsContainer');
        
        const displayMonthYear = document.getElementById('displayMonthYear');
        const totalDaysDisplay = document.getElementById('totalDaysDisplay');
        const rateDisplay = document.getElementById('rateDisplay');
        const totalAmountDisplay = document.getElementById('totalAmountDisplay');
        const invoiceDateInput = document.getElementById('invoiceDate');

        // Theme Setter
        function setTheme(themeName) {
            const theme = themes[themeName];
            const root = document.documentElement;
            
            root.style.setProperty('--primary', theme.primary);
            root.style.setProperty('--primary-hover', theme.hover);
            root.style.setProperty('--primary-light', theme.light);
            root.style.setProperty('--primary-border', theme.border);
            root.style.setProperty('--primary-text-dark', theme.dark);
        }

        // Initialization
        function init() {
            // Set initial inputs
            monthSelect.value = state.currentMonth;
            yearInput.value = state.currentYear;
            rateInput.value = state.dailyRate;
            invoiceDateInput.valueAsDate = new Date();

            // Event Listeners
            monthSelect.addEventListener('change', (e) => {
                state.currentMonth = parseInt(e.target.value);
                state.selectedDates.clear(); 
                renderCalendar();
                calculateTotals();
            });

            yearInput.addEventListener('change', (e) => {
                state.currentYear = parseInt(e.target.value);
                state.selectedDates.clear();
                renderCalendar();
                calculateTotals();
            });

            rateInput.addEventListener('input', (e) => {
                state.dailyRate = parseFloat(e.target.value) || 0;
                calculateTotals();
            });

            // Initial Render
            renderSidebarItems();
            renderCalendar();
            calculateTotals();
        }

        // Dynamic Items Logic
        function addItem() {
            state.items.push({
                id: Date.now(),
                description: 'Bonus',
                amount: 0
            });
            renderSidebarItems();
            calculateTotals();
        }

        function deleteItem(id) {
            state.items = state.items.filter(item => item.id !== id);
            renderSidebarItems();
            calculateTotals();
        }

        function updateItem(id, key, value) {
            const item = state.items.find(i => i.id === id);
            if (item) {
                if (key === 'amount') {
                    item[key] = parseFloat(value) || 0;
                } else {
                    item[key] = value;
                }
                calculateTotals(); // Re-calc totals but DON'T re-render sidebar to keep focus
            }
        }

        function renderSidebarItems() {
            sidebarItemsContainer.innerHTML = '';
            state.items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'flex gap-1 items-center'; // Reduced gap from 2 to 1
                div.innerHTML = `
                    <input type="text" placeholder="Label" value="${item.description}" 
                           oninput="updateItem(${item.id}, 'description', this.value)"
                           class="flex-1 min-w-0 bg-white border border-gray-300 text-gray-900 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500">
                    <input type="number" placeholder="0.00" value="${item.amount}" 
                           oninput="updateItem(${item.id}, 'amount', this.value)"
                           class="w-16 bg-white border border-gray-300 text-gray-900 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500 text-right">
                    <button onclick="deleteItem(${item.id})" class="text-gray-400 hover:text-red-500 transition px-1 flex-shrink-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                `;
                sidebarItemsContainer.appendChild(div);
            });
        }

        function renderInvoiceItems(items) {
            invoiceItemsContainer.innerHTML = '';
            items.forEach(item => {
                const isNegative = item.amount < 0;
                const displayAmount = Math.abs(item.amount).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                const colorClass = isNegative ? 'text-red-600' : 'text-green-600';
                const sign = isNegative ? '-' : '+';
                
                const div = document.createElement('div');
                div.className = `flex justify-between items-center mb-2 ${colorClass} print-compact-mb`;
                div.innerHTML = `
                    <span class="text-sm flex items-center">
                        <i class="fa-solid ${isNegative ? 'fa-minus-circle' : 'fa-plus-circle'} mr-2 text-xs opacity-70"></i>
                        ${item.description || 'Adjustment'}
                    </span>
                    <span class="font-semibold">${sign} ₱ ${displayAmount}</span>
                `;
                invoiceItemsContainer.appendChild(div);
            });
        }

        // Logic to toggle date selection
        function toggleDate(day) {
            if (state.selectedDates.has(day)) {
                state.selectedDates.delete(day);
            } else {
                state.selectedDates.add(day);
            }
            renderCalendar();
            calculateTotals();
        }

        // Calculation Logic
        function calculateTotals() {
            const daysCount = state.selectedDates.size;
            const basePay = daysCount * state.dailyRate;
            
            // Sum up adjustments
            const adjustmentsTotal = state.items.reduce((sum, item) => sum + item.amount, 0);
            const total = basePay + adjustmentsTotal;

            // Update UI
            totalDaysDisplay.textContent = `${daysCount} day${daysCount !== 1 ? 's' : ''}`;
            rateDisplay.textContent = `₱ ${state.dailyRate.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            
            // Render dynamic items in invoice
            renderInvoiceItems(state.items);

            totalAmountDisplay.textContent = `₱ ${Math.max(0, total).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
        }

        // Calendar Render Logic
        function renderCalendar() {
            calendarGrid.innerHTML = '';
            
            const firstDay = new Date(state.currentYear, state.currentMonth, 1).getDay();
            const daysInMonth = new Date(state.currentYear, state.currentMonth + 1, 0).getDate();
            
            // Update Header Text
            const monthName = monthSelect.options[monthSelect.selectedIndex].text;
            displayMonthYear.textContent = `${monthName} ${state.currentYear}`;

            // Add empty slots for days before start of month
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = 'calendar-day empty';
                calendarGrid.appendChild(emptyCell);
            }

            // Add days
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.textContent = day;
                dayCell.className = 'calendar-day';
                
                // Check if selected
                if (state.selectedDates.has(day)) {
                    dayCell.classList.add('selected');
                }

                // Interaction
                dayCell.onclick = () => toggleDate(day);

                calendarGrid.appendChild(dayCell);
            }
        }

        // Start App
        init();

    </script>
</body>
</html>
